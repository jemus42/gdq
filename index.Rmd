---
title: "All GDQs"
date: "`r format(Sys.time(), '%F %T %Z')`"
output: html_document
---

```{r setup, include=FALSE}
source("helpers.R")

gdq <- assemble_gdqs()

gdq_total <- gdq %>%
  group_by(year, gdq) %>%
  summarize(amount = sum(amount)) %>%
  ungroup()
```

Since I discovered that the [GDQ donations are public, tabular und scrapeable](https://gamesdonequick.com/tracker/donations/), I couldn't resist cobbling together a script to scrape all the data. It only took around 2 hours to finish. Anway, this site collects the results.

First up we look at the donation totals for each event.  
Note that as of now I only collected data from [AS]GDQs since 2011, the other events are not included (yet?).

```{r gdq_bars_by_event}
ggplot(gdq_total, aes(x = year, y = amount, fill = gdq)) +
  geom_col(position = "dodge", alpha = .75) +
  scale_y_continuous(labels = dollar, 
                     sec.axis = sec_axis(~.*.85, 
                                         labels = euro_scale)) +
  scale_fill_brewer(palette = "Set1", direction = -1) +
  labs(title = p_title, caption = p_caption,
       subtitle = "Donation totals by event",
       x = "Year", y = "Amount", fill = "Event")
```

Or cumulative, to see how much money GDQ has raised since 2011 (as I said, only the main events are counted, the actual total is even higher).

```{r gdq_bars_cumulative_by_event}
gdq_total %>%
  arrange(year) %>%
  mutate(amount = cumsum(amount)) %>%
  ggplot(aes(x = year, y = amount, fill = gdq)) +
  geom_col(alpha = .75) +
  scale_y_continuous(labels = dollar, 
                     sec.axis = sec_axis(~.*.85, 
                                         labels = euro_scale)) +
  scale_fill_brewer(palette = "Set1", direction = -1) +
  labs(title = p_title, caption = p_caption,
       subtitle = "Cumulative donation totals",
       x = "Year", y = "Amount", fill = "Event")
```

